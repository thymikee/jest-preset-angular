"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["9702"],{2337:function(e,t,s){s.r(t),s.d(t,{frontMatter:()=>d,toc:()=>u,default:()=>j,metadata:()=>n,assets:()=>p,contentTitle:()=>c});var n=JSON.parse('{"id":"getting-started/testbed-environment","title":"TestBed environment","description":"Angular provides a powerful testing utility called TestBed,","source":"@site/versioned_docs/version-15.0/getting-started/testbed-environment.md","sourceDirName":"getting-started","slug":"/getting-started/testbed-environment","permalink":"/jest-preset-angular/pr-preview/pr-3575/docs/15.0/getting-started/testbed-environment","draft":false,"unlisted":false,"editUrl":"https://github.com/thymikee/jest-preset-angular/edit/main/website/versioned_docs/version-15.0/getting-started/testbed-environment.md","tags":[],"version":"15.0","lastUpdatedBy":"dependabot[bot]","lastUpdatedAt":1768552610000,"frontMatter":{"id":"testbed-environment","title":"TestBed environment"},"sidebar":"docs","previous":{"title":"Options","permalink":"/jest-preset-angular/pr-preview/pr-3575/docs/15.0/getting-started/options"},"next":{"title":"Angular >=13","permalink":"/jest-preset-angular/pr-preview/pr-3575/docs/15.0/guides/angular-13+"}}'),i=s(4848),r=s(4429),l=s(6346),o=s(6754),a=s(5785);let d={id:"testbed-environment",title:"TestBed environment"},c,p={},u=[{value:"Functions",id:"functions",level:2},{value:"<code>setupZoneTestEnv(options)</code>",id:"setupzonetestenvoptions",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Example:",id:"example",level:4},{value:"<code>setupZonelessTestEnv(options)</code>",id:"setupzonelesstestenvoptions",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Example:",id:"example-1",level:4}];function h(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Angular provides a powerful testing utility called ",(0,i.jsx)(t.a,{href:"https://angular.dev/api/core/testing/TestBed",children:"TestBed"}),",\nwhich allows to configure and initialize an environment for unit testing and provides methods for creating components and services in unit tests."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"jest-preset-angular"})," provides utility functions to simplify setting up ",(0,i.jsx)(t.code,{children:"TestBed"})," environment. These below utility functions\nsupport both ",(0,i.jsx)(t.strong,{children:"zone-based"})," and ",(0,i.jsx)(t.strong,{children:"zoneless"})," environments, catering to different testing needs."]}),"\n",(0,i.jsx)(t.h2,{id:"functions",children:"Functions"}),"\n","\n",(0,i.jsx)(a.A,{toc:u.slice(1)}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"setupzonetestenvoptions",children:(0,i.jsx)(t.code,{children:"setupZoneTestEnv(options)"})}),"\n",(0,i.jsxs)(t.p,{children:["Configures an environment that uses ",(0,i.jsx)(t.code,{children:"zone.js"}),", which is the mechanism for tracking asynchronous operations.\nIt is suitable for most Angular applications that rely on ",(0,i.jsx)(t.code,{children:"zone.js"})," for change detection and other framework features."]}),"\n",(0,i.jsx)(t.p,{children:"You can customize the environment by providing options as function arguments."}),"\n",(0,i.jsx)(t.h4,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"options"}),(0,i.jsx)(t.strong,{children:"(optional)"}),": An object follows ",(0,i.jsx)(t.a,{href:"https://github.com/angular/angular/blob/a55341b1ab8d2bc4285a4cce59df7fc0b23c0125/packages/core/testing/src/test_bed_common.ts#L95",children:"TestEnvironmentOptions interface"}),", which allows fine-tuning the environment."]}),"\n"]}),"\n",(0,i.jsx)(t.h4,{id:"example",children:"Example:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Create a Jest setup file:"}),"\n"]}),"\n",(0,i.jsxs)(l.A,{groupId:"code-examples",children:[(0,i.jsx)(o.A,{value:"setup-file cjs",label:"Setup file CJS",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file CJS"}',children:"import { setupZoneTestEnv } from 'jest-preset-angular/setup-env/zone';\n\nsetupZoneTestEnv({\n  //...options\n});\n"})})}),(0,i.jsx)(o.A,{value:"setup-file esm",label:"Setup file ESM",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file ESM"}',children:"import { setupZoneTestEnv } from 'jest-preset-angular/setup-env/zone/index.mjs';\n\nsetupZoneTestEnv({\n  //...options\n});\n"})})})]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Update your Jest configuration:"}),"\n"]}),"\n",(0,i.jsxs)(l.A,{groupId:"code-examples",children:[(0,i.jsx)(o.A,{value:"node-<22.18",label:"Node <22.18",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="jest.config.ts" tab={"label":"Node <22.18"}',children:"import type { Config } from 'jest';\nimport { createCjsPreset } from 'jest-preset-angular/presets';\n\nexport default {\n  ...createCjsPreset(),\n  setupFilesAfterEnv: ['<rootDir>/setup-jest.ts'],\n} satisfies Config;\n"})})}),(0,i.jsx)(o.A,{value:"node-22.18+",label:"Node 22.18+",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="jest.config.ts" tab={"label":"Node 22.18+"}',children:"import type { Config } from 'jest';\nimport { createCjsPreset } from 'jest-preset-angular/presets/index.js';\n\nexport default {\n  ...createCjsPreset(),\n  setupFilesAfterEnv: ['<rootDir>/setup-jest.ts'],\n} satisfies Config;\n"})})})]}),"\n",(0,i.jsx)(t.h3,{id:"setupzonelesstestenvoptions",children:(0,i.jsx)(t.code,{children:"setupZonelessTestEnv(options)"})}),"\n",(0,i.jsxs)(t.p,{children:["Configures an environment that ",(0,i.jsx)(t.strong,{children:"DOESN'T"})," use ",(0,i.jsx)(t.code,{children:"zone.js"}),", as described in ",(0,i.jsx)(t.a,{href:"https://angular.dev/guide/experimental/zoneless",children:"Angular experimental zoneless guide"}),".\nIt is designed for projects that have disabled ",(0,i.jsx)(t.code,{children:"zone.js"}),", which can lead to improved performance and simplified testing."]}),"\n",(0,i.jsx)(t.p,{children:"You can customize the environment by providing options as function arguments."}),"\n",(0,i.jsx)(t.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"options"}),(0,i.jsx)(t.strong,{children:"(optional)"}),": An object follows ",(0,i.jsx)(t.a,{href:"https://github.com/angular/angular/blob/a55341b1ab8d2bc4285a4cce59df7fc0b23c0125/packages/core/testing/src/test_bed_common.ts#L95",children:"TestEnvironmentOptions interface"}),", which allows fine-tuning the environment."]}),"\n"]}),"\n",(0,i.jsx)(t.h4,{id:"example-1",children:"Example:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Create a Jest setup file:"}),"\n"]}),"\n",(0,i.jsxs)(l.A,{groupId:"code-examples",children:[(0,i.jsx)(o.A,{value:"setup-file cjs",label:"Setup file CJS",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file CJS"}',children:"import { setupZonelessTestEnv } from 'jest-preset-angular/setup-env/zoneless';\n\nsetupZonelessTestEnv({\n  //...options\n});\n"})})}),(0,i.jsx)(o.A,{value:"setup-file esm",label:"Setup file ESM",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file ESM"}',children:"import { setupZonelessTestEnv } from 'jest-preset-angular/setup-env/zoneless/index.mjs';\n\nsetupZonelessTestEnv({\n  //...options\n});\n"})})})]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Update your Jest configuration:"}),"\n"]}),"\n",(0,i.jsxs)(l.A,{groupId:"code-examples",children:[(0,i.jsx)(o.A,{value:"node-<22.18",label:"Node <22.18",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="jest.config.ts" tab={"label":"Node <22.18"}',children:"import type { Config } from 'jest';\nimport { createCjsPreset } from 'jest-preset-angular/presets';\n\nexport default {\n  ...createCjsPreset(),\n  setupFilesAfterEnv: ['<rootDir>/setup-jest.ts'],\n} satisfies Config;\n"})})}),(0,i.jsx)(o.A,{value:"node-22.18+",label:"Node 22.18+",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="jest.config.ts" tab={"label":"Node 22.18+"}',children:"import type { Config } from 'jest';\nimport { createCjsPreset } from 'jest-preset-angular/presets/index.js';\n\nexport default {\n  ...createCjsPreset(),\n  setupFilesAfterEnv: ['<rootDir>/setup-jest.ts'],\n} satisfies Config;\n"})})})]})]})}function j(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);
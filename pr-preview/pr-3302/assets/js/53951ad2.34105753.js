"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["5300"],{3799:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>d,default:()=>g,toc:()=>u,metadata:()=>s,assets:()=>p,contentTitle:()=>c});var s=JSON.parse('{"id":"getting-started/testbed-environment","title":"TestBed environment","description":"Angular provides a powerful testing utility called TestBed,","source":"@site/versioned_docs/version-15.0/getting-started/testbed-environment.md","sourceDirName":"getting-started","slug":"/getting-started/testbed-environment","permalink":"/jest-preset-angular/pr-preview/pr-3302/docs/getting-started/testbed-environment","draft":false,"unlisted":false,"editUrl":"https://github.com/thymikee/jest-preset-angular/edit/main/website/versioned_docs/version-15.0/getting-started/testbed-environment.md","tags":[],"version":"15.0","lastUpdatedBy":"ahnpnl","lastUpdatedAt":1756326055000,"frontMatter":{"id":"testbed-environment","title":"TestBed environment"},"sidebar":"docs","previous":{"title":"Options","permalink":"/jest-preset-angular/pr-preview/pr-3302/docs/getting-started/options"},"next":{"title":"Angular >=13","permalink":"/jest-preset-angular/pr-preview/pr-3302/docs/guides/angular-13+"}}'),i=t(5893),r=t(65),l=t(7057),o=t(4250),a=t(1924);let d={id:"testbed-environment",title:"TestBed environment"},c=void 0,p={},u=[{value:"Functions",id:"functions",level:2},{value:"<code>setupZoneTestEnv(options)</code>",id:"setupzonetestenvoptions",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Example:",id:"example",level:4},{value:"<code>setupZonelessTestEnv(options)</code>",id:"setupzonelesstestenvoptions",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Example:",id:"example-1",level:4}];function h(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Angular provides a powerful testing utility called ",(0,i.jsx)(n.a,{href:"https://angular.dev/api/core/testing/TestBed",children:"TestBed"}),",\nwhich allows to configure and initialize an environment for unit testing and provides methods for creating components and services in unit tests."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"jest-preset-angular"})," provides utility functions to simplify setting up ",(0,i.jsx)(n.code,{children:"TestBed"})," environment. These below utility functions\nsupport both ",(0,i.jsx)(n.strong,{children:"zone-based"})," and ",(0,i.jsx)(n.strong,{children:"zoneless"})," environments, catering to different testing needs."]}),"\n",(0,i.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n","\n",(0,i.jsx)(a.Z,{toc:u.slice(1)}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"setupzonetestenvoptions",children:(0,i.jsx)(n.code,{children:"setupZoneTestEnv(options)"})}),"\n",(0,i.jsxs)(n.p,{children:["Configures an environment that uses ",(0,i.jsx)(n.code,{children:"zone.js"}),", which is the mechanism for tracking asynchronous operations.\nIt is suitable for most Angular applications that rely on ",(0,i.jsx)(n.code,{children:"zone.js"})," for change detection and other framework features."]}),"\n",(0,i.jsx)(n.p,{children:"You can customize the environment by providing options as function arguments."}),"\n",(0,i.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"options"}),(0,i.jsx)(n.strong,{children:"(optional)"}),": An object follows ",(0,i.jsx)(n.a,{href:"https://github.com/angular/angular/blob/a55341b1ab8d2bc4285a4cce59df7fc0b23c0125/packages/core/testing/src/test_bed_common.ts#L95",children:"TestEnvironmentOptions interface"}),", which allows fine-tuning the environment."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example",children:"Example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create a Jest setup file:"}),"\n"]}),"\n",(0,i.jsxs)(l.Z,{groupId:"code-examples",children:[(0,i.jsx)(o.Z,{value:"setup-file cjs",label:"Setup file CJS",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file CJS"}',children:"import { setupZoneTestEnv } from 'jest-preset-angular/setup-env/zone';\n\nsetupZoneTestEnv({\n  //...options\n});\n"})})}),(0,i.jsx)(o.Z,{value:"setup-file esm",label:"Setup file ESM",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file ESM"}',children:"import { setupZoneTestEnv } from 'jest-preset-angular/setup-env/zone/index.mjs';\n\nsetupZoneTestEnv({\n  //...options\n});\n"})})})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Update your Jest configuration:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="jest.config.ts"',children:"import type { Config } from 'jest';\nimport { createCjsPreset } from 'jest-preset-angular/presets';\n\nexport default {\n  ...createCjsPreset(),\n  setupFilesAfterEnv: ['<rootDir>/setup-jest.ts'],\n} satisfies Config;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setupzonelesstestenvoptions",children:(0,i.jsx)(n.code,{children:"setupZonelessTestEnv(options)"})}),"\n",(0,i.jsxs)(n.p,{children:["Configures an environment that ",(0,i.jsx)(n.strong,{children:"DOESN'T"})," use ",(0,i.jsx)(n.code,{children:"zone.js"}),", as described in ",(0,i.jsx)(n.a,{href:"https://angular.dev/guide/experimental/zoneless",children:"Angular experimental zoneless guide"}),".\nIt is designed for projects that have disabled ",(0,i.jsx)(n.code,{children:"zone.js"}),", which can lead to improved performance and simplified testing."]}),"\n",(0,i.jsx)(n.p,{children:"You can customize the environment by providing options as function arguments."}),"\n",(0,i.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"options"}),(0,i.jsx)(n.strong,{children:"(optional)"}),": An object follows ",(0,i.jsx)(n.a,{href:"https://github.com/angular/angular/blob/a55341b1ab8d2bc4285a4cce59df7fc0b23c0125/packages/core/testing/src/test_bed_common.ts#L95",children:"TestEnvironmentOptions interface"}),", which allows fine-tuning the environment."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example-1",children:"Example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create a Jest setup file:"}),"\n"]}),"\n",(0,i.jsxs)(l.Z,{groupId:"code-examples",children:[(0,i.jsx)(o.Z,{value:"setup-file cjs",label:"Setup file CJS",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file CJS"}',children:"import { setupZonelessTestEnv } from 'jest-preset-angular/setup-env/zoneless';\n\nsetupZonelessTestEnv({\n  //...options\n});\n"})})}),(0,i.jsx)(o.Z,{value:"setup-file esm",label:"Setup file ESM",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="setup-jest.ts" tab={"label": "Setup file ESM"}',children:"import { setupZonelessTestEnv } from 'jest-preset-angular/setup-env/zoneless/index.mjs';\n\nsetupZonelessTestEnv({\n  //...options\n});\n"})})})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Update your Jest configuration:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="jest.config.ts"',children:"import type { Config } from 'jest';\nimport { createCjsPreset } from 'jest-preset-angular/presets';\n\nexport default {\n  ...createCjsPreset(),\n  setupFilesAfterEnv: ['<rootDir>/setup-jest.ts'],\n} satisfies Config;\n"})})]})}function g(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);
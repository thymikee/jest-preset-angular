# Repository Structure and Key Files

This guide provides an overview of the jest-preset-angular repository structure and key files.

## Key Files and Structure

### Source Code (`/src/`)

- `index.ts` - Main entry point, exports NgJestTransformer
- `ng-jest-transformer.ts` - Core transformer for Angular projects
- `presets/` - Preset configurations (CJS and ESM)
- `transformers/` - Custom transformers for Angular-specific processing
- `serializers/` - Jest snapshot serializers for Angular components
- `environments/` - Custom Jest environments for Angular testing

### Configuration Files

- `jest.config.ts` - Main Jest configuration for testing the preset itself
- `jest-cjs.config.ts` - CommonJS-specific Jest configuration
- `jest-esm.config.ts` - ESM-specific Jest configuration
- `tsconfig.json` - TypeScript configuration for main project
- `tsconfig.build.json` - TypeScript configuration for building
- `eslint.config.mjs` - ESLint configuration (flat config format)
- `.prettierrc.json` - Prettier formatting configuration

### Build Output (`/build/`)

- Contains compiled TypeScript files and bundled transformers
- Generated by `yarn build` command
- Includes optimized transformer bundles via esbuild

### Build Process

The build runs two steps:

1. TypeScript compilation: `tsc -p tsconfig.build.json`
2. Transformer bundling: Creates optimized bundles for transformer modules using esbuild

## Repository Structure Summary

```
jest-preset-angular/
├── src/                    # Main source code (transformers, presets, environments)
├── examples/               # Example Angular applications for testing
├── e2e/                    # End-to-end test scenarios
├── performance/            # Performance testing suite
├── website/                # Docusaurus documentation site
├── scripts/                # Build and utility scripts
├── .github/                # GitHub Actions workflows and templates
└── build/                  # Compiled output (generated by yarn build)
```

## Important Directories

### `/examples/`

Contains example Angular applications for testing the preset:

- `example-app-v18/` - Angular v18 example application
- `example-app-v19/` - Angular v19 example application
- `example-app-v20/` - Angular v20 example application
- `example-app-monorepo/` - Monorepo structure example

### `/e2e/`

End-to-end test scenarios that validate the preset against different project configurations and Angular versions.

### `/performance/`

Performance testing suite that measures transformer execution time and memory usage.

### `/website/`

Docusaurus documentation site with comprehensive guides and API documentation.

### `/scripts/`

Build and utility scripts for:

- Bundling transformers with esbuild
- Generating preset configurations
- Release automation
- CI/CD helpers

### `/.github/`

GitHub-specific files:

- `workflows/` - GitHub Actions CI/CD pipelines
- `ISSUE_TEMPLATE/` - Issue templates for bug reports and feature requests
- `copilot-instructions.md` - Main Copilot instruction file
- `instructions/` - Detailed instruction files for different aspects

## Key Configuration Patterns

### TypeScript Configuration Hierarchy

- `tsconfig.json` - Base configuration
- `tsconfig.build.json` - Build-specific configuration
- `tsconfig-base.spec.json` - Base test configuration
- `tsconfig.eslint.json` - ESLint-specific configuration

### Jest Configuration Strategy

- `jest.config.ts` - Main test configuration for the preset itself
- `jest-cjs.config.ts` - CommonJS-specific testing
- `jest-esm.config.ts` - ESM-specific testing
- Example apps have their own Jest configurations

### Preset Architecture

The preset follows a modular architecture:

- `presets/` - Factory functions for creating preset configurations
- `transformers/` - Individual transformer modules
- `serializers/` - Snapshot serializers for Angular components
- `environments/` - Custom Jest test environments

## Development Environment Setup

### Required Tools

- Node.js (^18.19.1 || ^20.11.1 || >=22.0.0)
- Yarn 4.9.2
- Git

### Environment Files

- `.yarnrc.yml` - Yarn configuration
- `.nvmrc` - Node.js version specification
- `.editorconfig` - Editor configuration
- `.gitignore` - Git ignore patterns
- `.prettierignore` - Prettier ignore patterns

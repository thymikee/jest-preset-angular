"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["8759"],{6124:function(e,t,s){s.r(t),s.d(t,{frontMatter:()=>l,default:()=>h,toc:()=>c,metadata:()=>n,assets:()=>d,contentTitle:()=>a});var n=JSON.parse('{"id":"getting-started/presets","title":"Presets","description":"In Jest, presets are pre-defined configurations that help streamline and standardize the process of setting up testing environments.","source":"@site/versioned_docs/version-15.0/getting-started/presets.md","sourceDirName":"getting-started","slug":"/getting-started/presets","permalink":"/jest-preset-angular/docs/getting-started/presets","draft":false,"unlisted":false,"editUrl":"https://github.com/thymikee/jest-preset-angular/edit/main/website/versioned_docs/version-15.0/getting-started/presets.md","tags":[],"version":"15.0","lastUpdatedBy":"renovate[bot]","lastUpdatedAt":1756802805000,"frontMatter":{"id":"presets","title":"Presets"},"sidebar":"docs","previous":{"title":"Installation","permalink":"/jest-preset-angular/docs/getting-started/installation"},"next":{"title":"Options","permalink":"/jest-preset-angular/docs/getting-started/options"}}'),r=s(5893),i=s(65),o=s(1924);let l={id:"presets",title:"Presets"},a=void 0,d={},c=[{value:"Functions",id:"functions",level:2},{value:"<code>createCjsPreset(options)</code>",id:"createcjspresetoptions",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Default returned value",id:"default-returned-value",level:4},{value:"Example:",id:"example",level:4},{value:"<code>createEsmPreset(options)</code>",id:"createesmpresetoptions",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Default returned value",id:"default-returned-value-1",level:4},{value:"Example:",id:"example-1",level:4}];function u(e){let t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["In Jest, ",(0,r.jsx)(t.strong,{children:"presets"})," are pre-defined configurations that help streamline and standardize the process of setting up testing environments.\nThey allow developers to quickly configure Jest with specific transformers, file extensions, and other options."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"jest-preset-angular"})," provides very opinionated presets and based on what we found to be useful."]}),"\n",(0,r.jsx)(t.admonition,{type:"important",children:(0,r.jsx)(t.p,{children:"The current best practice for using presets is to call one of the utility functions below to create (and optionally extend) presets. Legacy presets are listed at the bottom of the page."})}),"\n",(0,r.jsx)(t.h2,{id:"functions",children:"Functions"}),"\n","\n",(0,r.jsx)(o.Z,{toc:c.slice(1)}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"createcjspresetoptions",children:(0,r.jsx)(t.code,{children:"createCjsPreset(options)"})}),"\n",(0,r.jsxs)(t.p,{children:["Create a configuration to process JavaScript/TypeScript/HTML/SVG files (",(0,r.jsx)(t.code,{children:"ts|js|mjs|html|svg"}),")."]}),"\n",(0,r.jsx)(t.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"options"})," (",(0,r.jsx)(t.strong,{children:"OPTIONAL"}),")","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"tsconfig"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/tsconfig",children:"tsconfig options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"isolatedModules"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/isolatedModules",children:"isolatedModules options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"astTransformers"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/astTransformers",children:"astTransformers options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"diagnostics"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics",children:"diagnostics options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"testEnvironment"}),": either ",(0,r.jsx)(t.code,{children:"jsdom"})," or ",(0,r.jsx)(t.code,{children:"jest-preset-angular/environments/jest-jsdom-env"}),". Defaults to ",(0,r.jsx)(t.code,{children:"jsdom"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"default-returned-value",children:"Default returned value"}),"\n",(0,r.jsx)(t.p,{children:"An object contains Jest config:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "moduleFileExtensions": ["ts", "html", "js", "json", "mjs"],\n  "snapshotSerializers": [\n    "jest-preset-angular/build/serializers/html-comment",\n    "jest-preset-angular/build/serializers/ng-snapshot",\n    "jest-preset-angular/build/serializers/no-ng-attributes"\n  ],\n  "testEnvironment": "jsdom",\n  "transform": {\n    "^.+\\\\.(ts|js|mjs|html|svg)$": [\n      "jest-preset-angular",\n      {\n        "stringifyContentPathRegex": "\\\\.(html|svg)$",\n        "tsconfig": "<rootDir>/tsconfig.spec.json"\n      }\n    ]\n  },\n  "transformIgnorePatterns": ["node_modules/(?!(.*\\\\.mjs$|@angular/common/locales/.*\\\\.js$))"]\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"example",children:"Example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="jest.config.ts"',children:"import { createCjsPreset } from 'jest-preset-angular/presets';\nimport type { Config } from 'jest';\n\nconst presetConfig = createCjsPreset({\n  //...options\n});\n\nexport default {\n  ...presetConfig,\n} satisfies Config;\n"})}),"\n",(0,r.jsx)(t.h3,{id:"createesmpresetoptions",children:(0,r.jsx)(t.code,{children:"createEsmPreset(options)"})}),"\n",(0,r.jsxs)(t.p,{children:["Create a configuration to process JavaScript/TypeScript/HTML/SVG files (",(0,r.jsx)(t.code,{children:"ts|js|html|svg"}),")."]}),"\n",(0,r.jsx)(t.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"options"})," (",(0,r.jsx)(t.strong,{children:"OPTIONAL"}),")","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"tsconfig"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/tsconfig",children:"tsconfig options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"isolatedModules"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/isolatedModules",children:"isolatedModules options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"astTransformers"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/astTransformers",children:"astTransformers options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"diagnostics"}),": see more at ",(0,r.jsx)(t.a,{href:"https://kulshekhar.github.io/ts-jest/docs/getting-started/options/diagnostics",children:"diagnostics options page"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"testEnvironment"}),": either ",(0,r.jsx)(t.code,{children:"jsdom"})," or ",(0,r.jsx)(t.code,{children:"jest-preset-angular/environments/jest-jsdom-env"}),". Defaults to ",(0,r.jsx)(t.code,{children:"jsdom"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"default-returned-value-1",children:"Default returned value"}),"\n",(0,r.jsx)(t.p,{children:"An object contains Jest config:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "extensionsToTreatAsEsm": [".ts"],\n  "moduleFileExtensions": ["ts", "html", "js", "json", "mjs"],\n  "moduleNameMapper": {\n    "tslib": "tslib/tslib.es6.js"\n  },\n  "snapshotSerializers": [\n    "jest-preset-angular/build/serializers/html-comment",\n    "jest-preset-angular/build/serializers/ng-snapshot",\n    "jest-preset-angular/build/serializers/no-ng-attributes"\n  ],\n  "testEnvironment": "jsdom",\n  "transform": {\n    "^.+\\\\.(ts|js|html|svg)$": [\n      "jest-preset-angular",\n      {\n        "stringifyContentPathRegex": "\\\\.(html|svg)$",\n        "tsconfig": "<rootDir>/tsconfig.spec.json",\n        "useESM": true\n      }\n    ]\n  },\n  "transformIgnorePatterns": ["node_modules/(?!tslib)"]\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"example-1",children:"Example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="jest.config.ts"',children:"import { createEsmPreset } from 'jest-preset-angular/presets';\nimport type { Config } from 'jest';\n\nconst presetConfig = createEsmPreset({\n  //...options\n});\n\nexport default {\n  ...presetConfig,\n} satisfies Config;\n"})})]})}function h(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},1924:function(e,t,s){s.d(t,{Z:()=>i});var n=s(5893);s(7294);var r=s(9450);function i(e){let{toc:t,minHeadingLevel:s,maxHeadingLevel:i}=e;return(0,n.jsx)("div",{className:"tableOfContentsInline_prmo",children:(0,n.jsx)(r.Z,{toc:t,minHeadingLevel:s,maxHeadingLevel:i,className:"table-of-contents",linkClassName:null})})}},9450:function(e,t,s){s.d(t,{Z:()=>d});var n=s(5893),r=s(7294),i=s(2007);function o(e){let t=e.getBoundingClientRect();return t.top===t.bottom?o(e.parentNode):t}var l=s(1183);let a=r.memo(function e(t){let{toc:s,className:r,linkClassName:i,isChild:o}=t;return s.length?(0,n.jsx)("ul",{className:o?void 0:r,children:s.map(t=>(0,n.jsxs)("li",{children:[(0,n.jsx)(l.Z,{to:`#${t.id}`,className:i??void 0,dangerouslySetInnerHTML:{__html:t.value}}),(0,n.jsx)(e,{isChild:!0,toc:t.children,className:r,linkClassName:i})]},t.id))}):null});function d(e){let{toc:t,className:s="table-of-contents table-of-contents__left-border",linkClassName:l="table-of-contents__link",linkActiveClassName:d,minHeadingLevel:c,maxHeadingLevel:u,...h}=e,p=(0,i.L)(),m=c??p.tableOfContents.minHeadingLevel,g=u??p.tableOfContents.maxHeadingLevel,j=function(e){let{toc:t,minHeadingLevel:s,maxHeadingLevel:n}=e;return(0,r.useMemo)(()=>(function e(t){let{toc:s,minHeadingLevel:n,maxHeadingLevel:r}=t;return s.flatMap(t=>{let s=e({toc:t.children,minHeadingLevel:n,maxHeadingLevel:r});return t.level>=n&&t.level<=r?[{...t,children:s}]:s})})({toc:function(e){let t=e.map(e=>({...e,parentIndex:-1,children:[]})),s=Array(7).fill(-1);t.forEach((e,t)=>{let n=s.slice(2,e.level);e.parentIndex=Math.max(...n),s[e.level]=t});let n=[];return t.forEach(e=>{let{parentIndex:s,...r}=e;s>=0?t[s].children.push(r):n.push(r)}),n}(t),minHeadingLevel:s,maxHeadingLevel:n}),[t,s,n])}({toc:t,minHeadingLevel:m,maxHeadingLevel:g});var f=(0,r.useMemo)(()=>{if(l&&d)return{linkClassName:l,linkActiveClassName:d,minHeadingLevel:m,maxHeadingLevel:g}},[l,d,m,g]);let x=(0,r.useRef)(void 0),v=function(){let e=(0,r.useRef)(0),{navbar:{hideOnScroll:t}}=(0,i.L)();return(0,r.useEffect)(()=>{e.current=t?0:document.querySelector(".navbar").clientHeight},[t]),e}();return(0,r.useEffect)(()=>{if(!f)return()=>{};let{linkClassName:e,linkActiveClassName:t,minHeadingLevel:s,maxHeadingLevel:n}=f;function r(){let r=Array.from(document.getElementsByClassName(e)),i=function(e,t){let{anchorTopOffset:s}=t,n=e.find(e=>o(e).top>=s);if(n){var r;return(r=o(n)).top>0&&r.bottom<window.innerHeight/2?n:e[e.indexOf(n)-1]??null}return e[e.length-1]??null}(function(e){let{minHeadingLevel:t,maxHeadingLevel:s}=e,n=[];for(let e=t;e<=s;e+=1)n.push(`h${e}.anchor`);return Array.from(document.querySelectorAll(n.join()))}({minHeadingLevel:s,maxHeadingLevel:n}),{anchorTopOffset:v.current}),l=r.find(e=>i&&i.id===decodeURIComponent(e.href.substring(e.href.indexOf("#")+1)));r.forEach(e=>{e===l?(x.current&&x.current!==e&&x.current.classList.remove(t),e.classList.add(t),x.current=e):e.classList.remove(t)})}return document.addEventListener("scroll",r),document.addEventListener("resize",r),r(),()=>{document.removeEventListener("scroll",r),document.removeEventListener("resize",r)}},[f,v]),(0,n.jsx)(a,{toc:j,className:s,linkClassName:l,...h})}},65:function(e,t,s){s.d(t,{Z:()=>l,a:()=>o});var n=s(7294);let r={},i=n.createContext(r);function o(e){let t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);